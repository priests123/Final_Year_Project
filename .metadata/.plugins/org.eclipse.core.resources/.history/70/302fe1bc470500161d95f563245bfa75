package Display;

import importToDB.ReadInFile;
import importToDB.SQLDatabase;

import java.util.ArrayList;

public class checkFile {
	
	private static String fileToImportLocation = "";
	private static String formattedFileLocation = "";
	

	public static Boolean checkCSVType(String fileToImportLoc){
		fileToImportLocation = fileToImportLoc;
		setFormattedFileLocation();
		String fileType = fileToImportLocation.substring(fileToImportLocation.lastIndexOf(".")+1);
		if(fileType.equals("csv")){
			return true;
		}
		return false;
	}
	
	public static Boolean checkNotDuplicate(){
	
		ArrayList<ArrayList<String>> firstLine = ReadInFile.readFirstLine(formattedFileLocation);
		
		String unitNo = firstLine.get(0).get(0);
		String journeyStart = firstLine.get(0).get(1);
		String stationLeft = firstLine.get(0).get(1);
		//System.out.println(unitNo);
		//System.out.println(journeyStart);
		//System.out.println(stationLeft);
		
		String sql = "SELECT * FROM Journey WHERE Unit_No = '" + unitNo + "' AND Journey_Started_Time_Stamp = '" + journeyStart + "' AND Station_Left_Time_Stamp = '" + stationLeft + "'";
		if(SQLDatabase.isDuplicate(sql)){
			return false;
		} else {
			return true;
		}
	}
	
	public Boolean checkCSVFormat(){
		ArrayList<ArrayList<String>> firstLine = ReadInFile.readFirstLine(formattedFileLocation);
		//if(firstLine.get(0).get(0))
		System.out.println(firstLine.get(0).get(0));
		return null;
		
	}
	
	
	
	
	
	public static void setFormattedFileLocation(){
		ArrayList<Character> fileName = new ArrayList<Character>();
		for(int a = 0; a < fileToImportLocation.length(); a++){
			fileName.add(fileToImportLocation.charAt(a));
			//System.out.println(fileToImportLocation.charAt(a));
		}
		for(int b = 0; b < fileName.size(); b++){
			if(fileName.get(b).equals('\\')){
				fileName.add(b+1, '\\');
				b++;
			}
		}
		String fileLocation = "";
		for(Character s : fileName){
			fileLocation += s;
		}
		
		formattedFileLocation = fileLocation;
	}
	
	
}
